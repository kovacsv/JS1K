function S(n,h){function u(f,e){f&&e&&(f.x+=e.x,f.y+=e.y)}function y(f,e){var g=f.x-e.x,b=f.y-e.y;return v.sqrt(g*g+b*b)}function p(f,e,g,b,d,h){return{x:f,y:e,r:g,m:b,s:d||g/5,c:h||"#08b",l:1}}function z(f){r=f.pageX;t=f.pageY}var w=n.width,x=n.height,v=Math,m,r,t;n.onclick=function(f){z(f);m?(m.m={x:(r-m.x)/99,y:(t-m.y)/99},k.push(m),m=0):m=p(r,t,5*v.random()+5)};n.onmousemove=z;var k=[p(w/2,x/2,20,0,200,"#fc3"),p(w/2,x/2+200,8,{x:1,y:0})];setInterval(function(){var f=k.length,e,g,b,d,q,l,n,p;for(e=
f;e--;)for(b=k[e],g=f;g--;)e-g&&(d=k[g],q=d.x-b.x,l=d.y-b.y,n=v.sqrt(q*q+l*l),p=y(d,b),d=b.s*d.s/(p*p),u(b.m,{x:q/n*d,y:l/n*d}));for(e=f;e--;)u(k[e],k[e].m);q=[];for(e=f;e--;){b=k[e];for(g=f;g-- >e+1;)d=k[g],b.l&&d.l&&y(d,b)<b.r+d.r&&(l=b.s<d.s?b:d,d=l==b?d:b,d.r+=l.r/2,d.s+=l.s/2,u(d.m,l.m),d.m&&(d.m.x/=2,d.m.y/=2),l.l=0);b.l&&q.push(b)}k=q;h.fillStyle="#222";h.fillRect(0,0,w,x);for(e=f+1;e--;)if(b=k[e]||m)h.beginPath(),h.fillStyle=b.c,h.arc(b.x,b.y,b.r,0,7),h.fill(),b==m&&(h.strokeStyle=b.c,h.moveTo(b.x,
b.y),h.lineTo(r,t),h.stroke())},10)}S(a,c);
